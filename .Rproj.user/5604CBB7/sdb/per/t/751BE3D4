{
    "contents" : "# Andrew Fairless, January 2011\n# modified May 2015 for posting onto Github\n# This script calculates intracluster correlation coefficients for the effects\n# of litter membership on sociability as described in Fairless et al 2012\n# Fairless et al 2012, doi: 10.1016/j.bbr.2011.12.001, PMID:  22178318, PMCID:  PMC3474345\n\n# The fictional data in \"altereddata.txt\" were modified from the original \n# empirical data used in Fairless et al 2012.\n# I am using fictional data instead of the original data because I do not have \n# permission of my co-authors to release the data into the public domain.  \n# NOTE:  Because these data are fictional, several important characteristics of\n# these data may be different from those of the original data.\n\n# Each row is a separate mouse.\n# The left-most 3 columns are quasi-independent variables (mouse strain, sex, and age).\n# The right-most 5 columns are dependent variables describing behaviors of the\n# mice during the Social Approach/Choice Test.\n\n# analysis as described in Fairless et al 2012:\n# \"We first investigated litter membership by asking whether littermates were \n# more alike in their degree of sociability than non-littermates, after \n# controlling for strain, sex, and age. In other words, does the sociability of \n# mice cluster according to litter membership? . . . We analyzed social cylinder \n# investigation (which consisted predominantly of sniffing of the social cylinder) \n# in a linear mixed effects model for each strain as y = β0 + β1 (sex) + β2 \n# (age) + β1,2 (sex, age) + b1 (litter) where sex, age, and their interaction \n# were modeled as fixed effects and litter was modeled as a random effect. . . .\n# The intracluster correlation coefficients for C57BL/6J and BALB/cJ mice were \n# 0.60 and 0.30, respectively. Thus for both strains, some factors that affect \n# the litter as a whole cause the littermates to resemble each other in sociability \n# more closely than do non-littermates.\"\n\ninstall.packages(\"lme4\", dependencies = TRUE)   # install package if not already installed\n\ndata = read.table(\"altereddata.txt\", header = TRUE)      \nstrainsplit = split(data, data$strain)\n\nlibrary(lme4)\n\nfor(iter in 1:length(strainsplit)) {\n     \n     model = lmer(soc.3rd5min~age*sex*(1|litter), data = strainsplit[[iter]])\n     clustervar = as.data.frame(VarCorr(model))[1,5]^2                # extracts and squares litter standard deviation to provide variance\n     residualvar = as.data.frame(VarCorr(model))[2,5]^2               # extracts and squares residual standard deviation to provide variance\n     clustercoeff = clustervar / (clustervar + residualvar)           # calculates intracluster correlation coefficient\n\n     strainname = gsub(\"[[:punct:]]\", \"\", names(strainsplit)[iter])   # removes \"/\" from strain name\n     sink(file = paste(\"intraclustercorrelation,\", strainname, \".txt\", sep = \"\"))\n\n     print(paste(\"These results are for the\", names(strainsplit)[iter], \"mice\"))\n     print(paste(\"The intracluster correlation coefficient is\", clustercoeff))\n\n     sink(file = NULL)\n     \n}\n",
    "created" : 1452015987182.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2268616543",
    "id" : "751BE3D4",
    "lastKnownWriteTime" : 1433100571,
    "path" : "~/Link to backup/2015 code share/Fairless et al 2012 litter intracluster coeffs/to share/revising.R",
    "project_path" : "revising.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}